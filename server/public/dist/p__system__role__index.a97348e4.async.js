"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[24],{56231:function(q,Z,r){r.r(Z),r.d(Z,{default:function(){return le}});var U=r(27424),p=r.n(U),$=r(17061),f=r.n($),L=r(42122),F=r.n(L),S=r(17156),M=r.n(S),C=r(23662),I=r(51042),w=r(66958),W=r(95372),B=r(2236),K=r(16842),l=r(9927),i=r(2453),g=r(71577),x=r(85265),n=r(67294),G=r(37476),Y=r(5966),H=r(90672),a=r(85893),_=function(s){var d=(0,n.useRef)(),t=(0,l.useIntl)(),T=s.onSubmit,e=s.onCancel,y=s.createModalOpen,A=s.values;return(0,a.jsxs)(G.Y,{modalProps:{destroyOnClose:!0},initialValues:A,onOpenChange:function(h){h||s.onCancel()},formRef:d,onFinish:s.onSubmit,open:s.createModalOpen,submitter:{searchConfig:{resetText:"\u91CD\u7F6E"},resetButtonProps:{onClick:function(){var h;(h=d.current)===null||h===void 0||h.resetFields()}}},title:t.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),children:[(0,a.jsx)(Y.Z,{name:"name",label:t.formatMessage({id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"\u516C\u53F8\u540D\u79F0"}),width:"md",rules:[{required:!0,message:(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.updateForm.ruleName.nameRules",defaultMessage:"\u8BF7\u8F93\u5165\u516C\u53F8\u540D\u79F0\uFF01"})}]}),(0,a.jsx)(H.Z,{name:"description",width:"md",label:t.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descLabel",defaultMessage:"\u89C4\u5219\u63CF\u8FF0"}),placeholder:t.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"}),rules:[{required:!0,message:(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.updateForm.ruleDesc.descRules",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01"}),min:5}]})]})},ee=_,ae=function(s){var d=(0,n.useRef)(),t=(0,l.useIntl)(),T=s.onSubmit,e=s.onCancel,y=s.updateModalOpen,A=s.values;return(0,a.jsxs)(G.Y,{modalProps:{destroyOnClose:!0},initialValues:A,onOpenChange:function(h){h||s.onCancel()},formRef:d,onFinish:s.onSubmit,open:s.updateModalOpen,submitter:{searchConfig:{resetText:"\u91CD\u7F6E"},resetButtonProps:{onClick:function(){var h;(h=d.current)===null||h===void 0||h.resetFields()}}},title:t.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),children:[(0,a.jsx)(Y.Z,{name:"name",label:t.formatMessage({id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"\u516C\u53F8\u540D\u79F0"}),width:"md",rules:[{required:!0,message:(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.updateForm.ruleName.nameRules",defaultMessage:"\u8BF7\u8F93\u5165\u516C\u53F8\u540D\u79F0\uFF01"})}]}),(0,a.jsx)(H.Z,{name:"description",width:"md",label:t.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descLabel",defaultMessage:"\u89C4\u5219\u63CF\u8FF0"}),placeholder:t.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"}),rules:[{required:!0,message:(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.updateForm.ruleDesc.descRules",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01"}),min:5}]})]})},re=ae,ne=function(){var b=M()(f()().mark(function s(d){var t;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,(0,C._d)(F()({},d));case 4:return t(),i.ZP.success("Added successfully"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),t(),i.ZP.error("Adding failed, please try again!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},s,null,[[1,9]])}));return function(d){return b.apply(this,arguments)}}(),se=function(){var b=M()(f()().mark(function s(d){var t;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.ZP.loading("Configuring"),e.prev=1,e.next=4,(0,C.ul)({name:d.name,description:d.description,id:d.id});case 4:return t(),i.ZP.success("Configuration is successful"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),t(),i.ZP.error("Configuration failed, please try again!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},s,null,[[1,9]])}));return function(d){return b.apply(this,arguments)}}(),te=function(){var b=M()(f()().mark(function s(d){var t;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.ZP.loading("\u6B63\u5728\u5220\u9664"),d){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,(0,C.l5)({id:d.map(function(y){return y.id})});case 6:return t(),i.ZP.success("Deleted successfully and will refresh soon"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),t(),i.ZP.error("Delete failed, please try again"),e.abrupt("return",!1);case 16:case"end":return e.stop()}},s,null,[[3,11]])}));return function(d){return b.apply(this,arguments)}}(),ue=function(){var s=(0,n.useState)(!1),d=p()(s,2),t=d[0],T=d[1],e=(0,n.useState)(!1),y=p()(e,2),A=y[0],P=y[1],h=(0,n.useState)(!1),V=p()(h,2),N=V[0],z=V[1],O=(0,n.useRef)(),ie=(0,n.useState)(),J=p()(ie,2),c=J[0],R=J[1],de=(0,n.useState)([]),Q=p()(de,2),D=Q[0],X=Q[1],oe=(0,l.useIntl)(),k=[{title:(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.updateForm.roleName.nameLabel",defaultMessage:"Role name"}),dataIndex:"name",tip:"The role name is the unique key",render:function(o,u){return(0,a.jsx)("a",{onClick:function(){R(u),z(!0)},children:o})}},{title:(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.titleDesc",defaultMessage:"Description"}),dataIndex:"description",valueType:"textarea"},{title:(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(o,u){return[(0,a.jsx)("a",{onClick:function(){P(!0),R(u)},children:(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.update",defaultMessage:"Update"})},"config")]}}];return(0,a.jsxs)(w._z,{children:[(0,a.jsx)(W.Z,{headerTitle:oe.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:O,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,a.jsxs)(g.ZP,{type:"primary",onClick:function(){T(!0)},children:[(0,a.jsx)(I.Z,{})," ",(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")]},request:function(o,u){return(0,C.rH)(F()(F()({},o),{},{sorter:u}))},columns:k,rowSelection:{onChange:function(o,u){X(u)}}}),(D==null?void 0:D.length)>0&&(0,a.jsx)(B.S,{extra:(0,a.jsxs)("div",{children:[(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,a.jsx)("a",{style:{fontWeight:600},children:D.length})," ",(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"}),"\xA0\xA0",(0,a.jsxs)("span",{children:[(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.totalServiceCalls",defaultMessage:"Total number of service calls"})," ",D.reduce(function(m,o){return m},0)," ",(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.tenThousand",defaultMessage:"\u4E07"})]})]}),children:(0,a.jsx)(g.ZP,{onClick:M()(f()().mark(function m(){var o,u;return f()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,te(D);case 2:X([]),(o=O.current)===null||o===void 0||(u=o.reloadAndRest)===null||u===void 0||u.call(o);case 4:case"end":return E.stop()}},m)})),children:(0,a.jsx)(l.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})})}),(0,a.jsx)(ee,{onSubmit:function(){var m=M()(f()().mark(function o(u){var j;return f()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u.id=c==null?void 0:c.id,v.next=3,ne(u);case 3:j=v.sent,j&&(T(!1),R(void 0),O.current&&O.current.reload());case 5:case"end":return v.stop()}},o)}));return function(o){return m.apply(this,arguments)}}(),onCancel:function(){T(!1),N||R(void 0)},createModalOpen:t,values:c||{}}),(0,a.jsx)(re,{onSubmit:function(){var m=M()(f()().mark(function o(u){var j;return f()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u.id=c==null?void 0:c.id,v.next=3,se(u);case 3:j=v.sent,j&&(P(!1),R(void 0),O.current&&O.current.reload());case 5:case"end":return v.stop()}},o)}));return function(o){return m.apply(this,arguments)}}(),onCancel:function(){P(!1),N||R(void 0)},updateModalOpen:A,values:c||{}}),(0,a.jsx)(x.Z,{width:600,open:N,onClose:function(){R(void 0),z(!1)},closable:!1,children:(c==null?void 0:c.name)&&(0,a.jsx)(K.vY,{column:2,title:c==null?void 0:c.name,request:M()(f()().mark(function m(){return f()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",{data:c||{}});case 1:case"end":return u.stop()}},m)})),params:{id:c==null?void 0:c.name},columns:k})})]})},le=ue},23662:function(q,Z,r){r.d(Z,{_d:function(){return W},l5:function(){return K},rH:function(){return M},ul:function(){return I}});var U=r(17061),p=r.n(U),$=r(42122),f=r.n($),L=r(17156),F=r.n(L),S=r(9927);function M(i){return C.apply(this,arguments)}function C(){return C=F()(p()().mark(function i(g){return p()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(g),n.abrupt("return",(0,S.request)("/api/role/list",{method:"POST",data:f()(f()({},g),{},{hasFilters:!0})}));case 2:case"end":return n.stop()}},i)})),C.apply(this,arguments)}function I(i){return w.apply(this,arguments)}function w(){return w=F()(p()().mark(function i(g){return p()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,S.request)("/api/role/mod",{method:"POST",data:g||{}}));case 1:case"end":return n.stop()}},i)})),w.apply(this,arguments)}function W(i){return B.apply(this,arguments)}function B(){return B=F()(p()().mark(function i(g){return p()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,S.request)("/api/role/add",{method:"POST",data:g||{}}));case 1:case"end":return n.stop()}},i)})),B.apply(this,arguments)}function K(i){return l.apply(this,arguments)}function l(){return l=F()(p()().mark(function i(g){return p()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,S.request)("/api/role/del",{method:"POST",data:g||{}}));case 1:case"end":return n.stop()}},i)})),l.apply(this,arguments)}}}]);
