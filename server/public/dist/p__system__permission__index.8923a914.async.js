"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[56],{81476:function(ve,B,n){n.r(B),n.d(B,{default:function(){return fe}});var W=n(27424),P=n.n(W),z=n(17061),u=n.n(z),K=n(42122),w=n.n(K),H=n(17156),p=n.n(H),i=n(9927);function J(d){return O.apply(this,arguments)}function O(){return O=p()(u()().mark(function d(s){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(s),e.abrupt("return",(0,i.request)("/api/permission/list",{method:"POST",data:w()(w()({},s),{},{hasFilters:!0})}));case 2:case"end":return e.stop()}},d)})),O.apply(this,arguments)}function Q(d){return x.apply(this,arguments)}function x(){return x=p()(u()().mark(function d(s){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/permission/mod",{method:"POST",data:s||{}}));case 1:case"end":return e.stop()}},d)})),x.apply(this,arguments)}function X(d){return Z.apply(this,arguments)}function Z(){return Z=p()(u()().mark(function d(s){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/permission/add",{method:"POST",data:s||{}}));case 1:case"end":return e.stop()}},d)})),Z.apply(this,arguments)}function q(d){return $.apply(this,arguments)}function $(){return $=p()(u()().mark(function d(s){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/api/permission/del",{method:"POST",data:s||{}}));case 1:case"end":return e.stop()}},d)})),$.apply(this,arguments)}var _=n(51042),ee=n(66958),ae=n(95372),re=n(2236),se=n(16842),g=n(2453),A=n(71577),ne=n(85265),v=n(67294),U=n(37476),L=n(5966),E=n(90672),r=n(85893),te=function(s){var t=(0,v.useRef)(),e=(0,i.useIntl)(),F=s.onSubmit,a=s.onCancel,T=s.createModalOpen,R=s.values;return(0,r.jsxs)(U.Y,{modalProps:{destroyOnClose:!0},initialValues:R,onOpenChange:function(f){f||s.onCancel()},formRef:t,onFinish:s.onSubmit,open:s.createModalOpen,submitter:{searchConfig:{resetText:"\u91CD\u7F6E"},resetButtonProps:{onClick:function(){var f;(f=t.current)===null||f===void 0||f.resetFields()}}},title:e.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),children:[(0,r.jsx)(L.Z,{name:"name",label:e.formatMessage({id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"\u516C\u53F8\u540D\u79F0"}),width:"md",rules:[{required:!0,message:(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.updateForm.ruleName.nameRules",defaultMessage:"\u8BF7\u8F93\u5165\u516C\u53F8\u540D\u79F0\uFF01"})}]}),(0,r.jsx)(E.Z,{name:"description",width:"md",label:e.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descLabel",defaultMessage:"\u89C4\u5219\u63CF\u8FF0"}),placeholder:e.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"}),rules:[{required:!0,message:(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.updateForm.ruleDesc.descRules",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01"}),min:5}]})]})},ue=te,le=function(s){var t=(0,v.useRef)(),e=(0,i.useIntl)(),F=s.onSubmit,a=s.onCancel,T=s.updateModalOpen,R=s.values;return(0,r.jsxs)(U.Y,{modalProps:{destroyOnClose:!0},initialValues:R,onOpenChange:function(f){f||s.onCancel()},formRef:t,onFinish:s.onSubmit,open:s.updateModalOpen,submitter:{searchConfig:{resetText:"\u91CD\u7F6E"},resetButtonProps:{onClick:function(){var f;(f=t.current)===null||f===void 0||f.resetFields()}}},title:e.formatMessage({id:"pages.searchTable.updateForm.basicConfig",defaultMessage:"\u57FA\u672C\u4FE1\u606F"}),children:[(0,r.jsx)(L.Z,{name:"name",label:e.formatMessage({id:"pages.searchTable.updateForm.ruleName.nameLabel",defaultMessage:"\u516C\u53F8\u540D\u79F0"}),width:"md",rules:[{required:!0,message:(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.updateForm.ruleName.nameRules",defaultMessage:"\u8BF7\u8F93\u5165\u516C\u53F8\u540D\u79F0\uFF01"})}]}),(0,r.jsx)(E.Z,{name:"description",width:"md",label:e.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descLabel",defaultMessage:"\u89C4\u5219\u63CF\u8FF0"}),placeholder:e.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"}),rules:[{required:!0,message:(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.updateForm.ruleDesc.descRules",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01"}),min:5}]})]})},ie=le,de=function(){var d=p()(u()().mark(function s(t){var e;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=g.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),a.prev=1,a.next=4,X(w()({},t));case 4:return e(),g.ZP.success("Added successfully"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),e(),g.ZP.error("Adding failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},s,null,[[1,9]])}));return function(t){return d.apply(this,arguments)}}(),oe=function(){var d=p()(u()().mark(function s(t){var e;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=g.ZP.loading("Configuring"),a.prev=1,a.next=4,Q({name:t.name,description:t.description,id:t.id});case 4:return e(),g.ZP.success("Configuration is successful"),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(1),e(),g.ZP.error("Configuration failed, please try again!"),a.abrupt("return",!1);case 14:case"end":return a.stop()}},s,null,[[1,9]])}));return function(t){return d.apply(this,arguments)}}(),ce=function(){var d=p()(u()().mark(function s(t){var e;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=g.ZP.loading("\u6B63\u5728\u5220\u9664"),t){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,q({id:t.map(function(T){return T.id})});case 6:return e(),g.ZP.success("Deleted successfully and will refresh soon"),a.abrupt("return",!0);case 11:return a.prev=11,a.t0=a.catch(3),e(),g.ZP.error("Delete failed, please try again"),a.abrupt("return",!1);case 16:case"end":return a.stop()}},s,null,[[3,11]])}));return function(t){return d.apply(this,arguments)}}(),me=function(){var s=(0,v.useState)(!1),t=P()(s,2),e=t[0],F=t[1],a=(0,v.useState)(!1),T=P()(a,2),R=T[0],C=T[1],f=(0,v.useState)(!1),I=P()(f,2),D=I[0],N=I[1],j=(0,v.useRef)(),pe=(0,v.useState)(),k=P()(pe,2),c=k[0],b=k[1],he=(0,v.useState)([]),Y=P()(he,2),S=Y[0],G=Y[1],ge=(0,i.useIntl)(),V=[{title:(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.updateForm.permissionName.nameLabel",defaultMessage:"Permission name"}),dataIndex:"name",tip:"The permission name is the unique key",render:function(o,l){return(0,r.jsx)("a",{onClick:function(){b(l),N(!0)},children:o})}},{title:(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.titleDesc",defaultMessage:"Description"}),dataIndex:"description",valueType:"textarea"},{title:(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(o,l){return[(0,r.jsx)("a",{onClick:function(){C(!0),b(l)},children:(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.update",defaultMessage:"Update"})},"config")]}}];return(0,r.jsxs)(ee._z,{children:[(0,r.jsx)(ae.Z,{headerTitle:ge.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:j,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,r.jsxs)(A.ZP,{type:"primary",onClick:function(){F(!0)},children:[(0,r.jsx)(_.Z,{})," ",(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")]},request:function(o,l){return J(w()(w()({},o),{},{sorter:l}))},columns:V,rowSelection:{onChange:function(o,l){G(l)}}}),(S==null?void 0:S.length)>0&&(0,r.jsx)(re.S,{extra:(0,r.jsxs)("div",{children:[(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,r.jsx)("a",{style:{fontWeight:600},children:S.length})," ",(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"}),"\xA0\xA0",(0,r.jsxs)("span",{children:[(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.totalServiceCalls",defaultMessage:"Total number of service calls"})," ",S.reduce(function(m,o){return m},0)," ",(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.tenThousand",defaultMessage:"\u4E07"})]})]}),children:(0,r.jsx)(A.ZP,{onClick:p()(u()().mark(function m(){var o,l;return u()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,ce(S);case 2:G([]),(o=j.current)===null||o===void 0||(l=o.reloadAndRest)===null||l===void 0||l.call(o);case 4:case"end":return y.stop()}},m)})),children:(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})})}),(0,r.jsx)(ue,{onSubmit:function(){var m=p()(u()().mark(function o(l){var M;return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return l.id=c==null?void 0:c.id,h.next=3,de(l);case 3:M=h.sent,M&&(F(!1),b(void 0),j.current&&j.current.reload());case 5:case"end":return h.stop()}},o)}));return function(o){return m.apply(this,arguments)}}(),onCancel:function(){F(!1),D||b(void 0)},createModalOpen:e,values:c||{}}),(0,r.jsx)(ie,{onSubmit:function(){var m=p()(u()().mark(function o(l){var M;return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return l.id=c==null?void 0:c.id,h.next=3,oe(l);case 3:M=h.sent,M&&(C(!1),b(void 0),j.current&&j.current.reload());case 5:case"end":return h.stop()}},o)}));return function(o){return m.apply(this,arguments)}}(),onCancel:function(){C(!1),D||b(void 0)},updateModalOpen:R,values:c||{}}),(0,r.jsx)(ne.Z,{width:600,open:D,onClose:function(){b(void 0),N(!1)},closable:!1,children:(c==null?void 0:c.name)&&(0,r.jsx)(se.vY,{column:2,title:c==null?void 0:c.name,request:p()(u()().mark(function m(){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{data:c||{}});case 1:case"end":return l.stop()}},m)})),params:{id:c==null?void 0:c.name},columns:V})})]})},fe=me}}]);
