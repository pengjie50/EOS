"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[472],{64317:function(ae,w,e){var y=e(1413),d=e(91),x=e(22270),l=e(67294),B=e(66758),M=e(24981),_=e(85893),P=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],s=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],Z=l.forwardRef(function(o,i){var p=o.fieldProps,F=o.children,r=o.params,Y=o.proFieldProps,H=o.mode,N=o.valueEnum,O=o.request,K=o.showSearch,Q=o.options,C=(0,d.Z)(o,P),G=(0,l.useContext)(B.Z);return(0,_.jsx)(M.Z,(0,y.Z)((0,y.Z)({valueEnum:(0,x.h)(N),request:O,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,y.Z)({options:Q,mode:H,showSearch:K,getPopupContainer:G.getPopupContainer},p),ref:i,proFieldProps:Y},C),{},{children:F}))}),S=l.forwardRef(function(o,i){var p=o.fieldProps,F=o.children,r=o.params,Y=o.proFieldProps,H=o.mode,N=o.valueEnum,O=o.request,K=o.options,Q=(0,d.Z)(o,s),C=(0,y.Z)({options:K,mode:H||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},p),G=(0,l.useContext)(B.Z);return(0,_.jsx)(M.Z,(0,y.Z)((0,y.Z)({valueEnum:(0,x.h)(N),request:O,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,y.Z)({getPopupContainer:G.getPopupContainer},C),ref:i,proFieldProps:Y},Q),{},{children:F}))}),A=Z,j=S,b=A;b.SearchSelect=j,b.displayName="ProFormComponent",w.Z=b},50427:function(ae,w,e){e.d(w,{S9:function(){return P},j1:function(){return Z},lQ:function(){return A},q4:function(){return b}});var y=e(17061),d=e.n(y),x=e(42122),l=e.n(x),B=e(17156),M=e.n(B),_=e(9927);function P(i){return s.apply(this,arguments)}function s(){return s=M()(d()().mark(function i(p){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(p),r.abrupt("return",(0,_.request)("/api/company/list",{method:"POST",data:l()(l()({},p),{},{hasFilters:!0})}));case 2:case"end":return r.stop()}},i)})),s.apply(this,arguments)}function Z(i){return S.apply(this,arguments)}function S(){return S=M()(d()().mark(function i(p){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/company/mod",{method:"POST",data:p||{}}));case 1:case"end":return r.stop()}},i)})),S.apply(this,arguments)}function A(i){return j.apply(this,arguments)}function j(){return j=M()(d()().mark(function i(p){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/company/add",{method:"POST",data:p||{}}));case 1:case"end":return r.stop()}},i)})),j.apply(this,arguments)}function b(i){return o.apply(this,arguments)}function o(){return o=M()(d()().mark(function i(p){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/company/del",{method:"POST",data:p||{}}));case 1:case"end":return r.stop()}},i)})),o.apply(this,arguments)}},23662:function(ae,w,e){e.d(w,{_d:function(){return A},l5:function(){return b},rH:function(){return P},ul:function(){return Z}});var y=e(17061),d=e.n(y),x=e(42122),l=e.n(x),B=e(17156),M=e.n(B),_=e(9927);function P(i){return s.apply(this,arguments)}function s(){return s=M()(d()().mark(function i(p){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log(p),r.abrupt("return",(0,_.request)("/api/role/list",{method:"POST",data:l()(l()({},p),{},{hasFilters:!0})}));case 2:case"end":return r.stop()}},i)})),s.apply(this,arguments)}function Z(i){return S.apply(this,arguments)}function S(){return S=M()(d()().mark(function i(p){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/role/mod",{method:"POST",data:p||{}}));case 1:case"end":return r.stop()}},i)})),S.apply(this,arguments)}function A(i){return j.apply(this,arguments)}function j(){return j=M()(d()().mark(function i(p){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/role/add",{method:"POST",data:p||{}}));case 1:case"end":return r.stop()}},i)})),j.apply(this,arguments)}function b(i){return o.apply(this,arguments)}function o(){return o=M()(d()().mark(function i(p){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,_.request)("/api/role/del",{method:"POST",data:p||{}}));case 1:case"end":return r.stop()}},i)})),o.apply(this,arguments)}},74779:function(ae,w,e){e.r(w),e.d(w,{default:function(){return Pe}});var y=e(27424),d=e.n(y),x=e(17061),l=e.n(x),B=e(42122),M=e.n(B),_=e(17156),P=e.n(_),s=e(9927);function Z(h){return S.apply(this,arguments)}function S(){return S=P()(l()().mark(function h(u){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(u),a.abrupt("return",(0,s.request)("/api/user/list",{method:"POST",data:M()(M()({},u),{},{hasFilters:!0})}));case 2:case"end":return a.stop()}},h)})),S.apply(this,arguments)}function A(h){return j.apply(this,arguments)}function j(){return j=P()(l()().mark(function h(u){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.request)("/api/user/mod",{method:"POST",data:u||{}}));case 1:case"end":return a.stop()}},h)})),j.apply(this,arguments)}function b(h){return o.apply(this,arguments)}function o(){return o=P()(l()().mark(function h(u){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.request)("/api/user/add",{method:"POST",data:u||{}}));case 1:case"end":return a.stop()}},h)})),o.apply(this,arguments)}function i(h){return p.apply(this,arguments)}function p(){return p=P()(l()().mark(function h(u){return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,s.request)("/api/user/del",{method:"POST",data:u||{}}));case 1:case"end":return a.stop()}},h)})),p.apply(this,arguments)}var F=e(51042),r=e(66958),Y=e(95372),H=e(2236),N=e(16842),O=e(2453),K=e(71577),Q=e(85265),C=e(67294),G=e(37476),J=e(5966),ne=e(64317),oe=e(23662),ie=e(50427),t=e(85893),de=function(u){var m=(0,C.useRef)(),a=(0,s.useIntl)(),R=(0,C.useState)({}),n=d()(R,2),I=n[0],X=n[1],L=(0,C.useState)({}),D=d()(L,2),q=D[0],k=D[1],re=u.onSubmit,W=u.onCancel,te=u.createModalOpen,ee=u.values;return(0,C.useEffect)(function(){te&&((0,oe.rH)({pageSize:100,current:1}).then(function(c){var g={};c.data.forEach(function($){g[$.id]=$.name}),X(g)}),(0,ie.S9)({pageSize:100,current:1}).then(function(c){var g={};c.data.forEach(function($){g[$.id]=$.name}),k(g)}))},[u.createModalOpen]),(0,t.jsxs)(G.Y,{modalProps:{destroyOnClose:!0},initialValues:ee,onOpenChange:function(g){g||u.onCancel()},formRef:m,onFinish:u.onSubmit,open:u.createModalOpen,submitter:{searchConfig:{resetText:"\u91CD\u7F6E"},resetButtonProps:{onClick:function(){var g;(g=m.current)===null||g===void 0||g.resetFields()}}},title:a.formatMessage({id:"pages.user.add",defaultMessage:"\u65B0\u589E\u7528\u6237"}),children:[(0,t.jsx)(J.Z,{name:"username",label:a.formatMessage({id:"pages.user.username",defaultMessage:"\u7528\u6237\u540D"}),width:"md",rules:[{required:!0,message:(0,t.jsx)(s.FormattedMessage,{id:"pages.user.rules.username",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\uFF01"})}]}),(0,t.jsx)(J.Z.Password,{name:"password",label:a.formatMessage({id:"pages.user.password",defaultMessage:"\u5BC6\u7801"}),width:"md",rules:[{required:!0,message:(0,t.jsx)(s.FormattedMessage,{id:"pages.user.rules.password",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,t.jsx)(ne.Z,{name:"company_id",width:"md",label:a.formatMessage({id:"pages.user.company",defaultMessage:"\u516C\u53F8"}),valueEnum:q}),(0,t.jsx)(ne.Z,{name:"role_id",width:"md",label:a.formatMessage({id:"pages.user.role",defaultMessage:"\u89D2\u8272"}),valueEnum:I})]})},pe=de,ce=e(90672),me=function(u){var m=(0,C.useRef)(),a=(0,s.useIntl)(),R=u.onSubmit,n=u.onCancel,I=u.updateModalOpen,X=u.values;return(0,t.jsxs)(G.Y,{modalProps:{destroyOnClose:!0},initialValues:X,onOpenChange:function(D){D||u.onCancel()},formRef:m,onFinish:u.onSubmit,open:u.updateModalOpen,submitter:{searchConfig:{resetText:"\u91CD\u7F6E"},resetButtonProps:{onClick:function(){var D;(D=m.current)===null||D===void 0||D.resetFields()}}},title:a.formatMessage({id:"pages.user.mod",defaultMessage:"\u4FEE\u6539\u7528\u6237\u4FE1\u606F"}),children:[(0,t.jsx)(J.Z,{name:"username",label:a.formatMessage({id:"pages.user.username",defaultMessage:"\u7528\u6237\u540D"}),width:"md",rules:[{required:!0,message:(0,t.jsx)(s.FormattedMessage,{id:"pages.user.rules.username",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\uFF01"})}]}),(0,t.jsx)(J.Z,{name:"email",label:a.formatMessage({id:"pages.user.email",defaultMessage:"\u90AE\u7BB1"}),width:"md"}),(0,t.jsx)(J.Z,{name:"phone",label:a.formatMessage({id:"pages.user.phone",defaultMessage:"\u624B\u673A\u53F7"}),width:"md"}),(0,t.jsx)(ce.Z,{name:"description",width:"md",label:a.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descLabel",defaultMessage:"\u89C4\u5219\u63CF\u8FF0"}),placeholder:a.formatMessage({id:"pages.searchTable.updateForm.ruleDesc.descPlaceholder",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26"}),rules:[{required:!0,message:(0,t.jsx)(s.FormattedMessage,{id:"pages.searchTable.updateForm.ruleDesc.descRules",defaultMessage:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01"}),min:5}]})]})},fe=me,he=function(){var h=P()(l()().mark(function u(m){var a;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=O.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),n.prev=1,n.next=4,b(M()({},m));case 4:return a(),O.ZP.success("Added successfully"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),a(),O.ZP.error("Adding failed, please try again!"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},u,null,[[1,9]])}));return function(m){return h.apply(this,arguments)}}(),ge=function(){var h=P()(l()().mark(function u(m){var a;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=O.ZP.loading("Configuring"),n.prev=1,n.next=4,A(m);case 4:return a(),O.ZP.success("Configuration is successful"),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(1),a(),O.ZP.error("Configuration failed, please try again!"),n.abrupt("return",!1);case 14:case"end":return n.stop()}},u,null,[[1,9]])}));return function(m){return h.apply(this,arguments)}}(),ve=function(){var h=P()(l()().mark(function u(m){var a;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=O.ZP.loading("\u6B63\u5728\u5220\u9664"),m){n.next=3;break}return n.abrupt("return",!0);case 3:return n.prev=3,n.next=6,i({id:m.map(function(I){return I.id})});case 6:return a(),O.ZP.success("Deleted successfully and will refresh soon"),n.abrupt("return",!0);case 11:return n.prev=11,n.t0=n.catch(3),a(),O.ZP.error("Delete failed, please try again"),n.abrupt("return",!1);case 16:case"end":return n.stop()}},u,null,[[3,11]])}));return function(m){return h.apply(this,arguments)}}(),Me=function(){var u=(0,C.useState)(!1),m=d()(u,2),a=m[0],R=m[1],n=(0,C.useState)(!1),I=d()(n,2),X=I[0],L=I[1],D=(0,C.useState)(!1),q=d()(D,2),k=q[0],re=q[1],W=(0,C.useRef)(),te=(0,C.useState)(),ee=d()(te,2),c=ee[0],g=ee[1],$=(0,C.useState)([]),se=d()($,2),V=se[0],ue=se[1],Ee=(0,s.useIntl)(),le=[{title:(0,t.jsx)(s.FormattedMessage,{id:"pages.user.username",defaultMessage:"\u7528\u6237\u540D"}),dataIndex:"username",tip:"The user name is the unique key",render:function(v,f){return(0,t.jsx)("a",{onClick:function(){g(f),re(!0)},children:v})}},{title:(0,t.jsx)(s.FormattedMessage,{id:"pages.user.nickname",defaultMessage:"\u6635\u79F0"}),dataIndex:"nickname",valueType:"text"},{title:(0,t.jsx)(s.FormattedMessage,{id:"pages.user.email",defaultMessage:"\u90AE\u7BB1"}),dataIndex:"email",valueType:"text"},{title:(0,t.jsx)(s.FormattedMessage,{id:"pages.user.phone",defaultMessage:"\u624B\u673A\u53F7"}),dataIndex:"phone",valueType:"text"},{title:(0,t.jsx)(s.FormattedMessage,{id:"pages.user.company",defaultMessage:"\u516C\u53F8"}),dataIndex:"company_name",valueType:"text"},{title:(0,t.jsx)(s.FormattedMessage,{id:"pages.user.role",defaultMessage:"\u89D2\u8272"}),dataIndex:"role_name",valueType:"text"},{title:(0,t.jsx)(s.FormattedMessage,{id:"pages.user.status",defaultMessage:"\u72B6\u6001"}),dataIndex:"status",valueEnum:{0:{text:"\u7981\u7528",status:"Error"},1:{text:"\u6B63\u5E38",status:"Success"}}},{title:(0,t.jsx)(s.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"\u64CD\u4F5C"}),dataIndex:"option",valueType:"option",render:function(v,f){return[(0,t.jsx)("a",{onClick:function(){L(!0),g(f)},children:(0,t.jsx)(s.FormattedMessage,{id:"pages.searchTable.update",defaultMessage:"Update"})},"config")]}}];return(0,t.jsxs)(r._z,{children:[(0,t.jsx)(Y.Z,{headerTitle:Ee.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:W,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,t.jsxs)(K.ZP,{type:"primary",onClick:function(){R(!0)},children:[(0,t.jsx)(F.Z,{})," ",(0,t.jsx)(s.FormattedMessage,{id:"pages.searchTable.new",defaultMessage:"New"})]},"primary")]},request:function(v,f){return Z(M()(M()({},v),{},{sorter:f}))},columns:le,rowSelection:{onChange:function(v,f){ue(f)}}}),(V==null?void 0:V.length)>0&&(0,t.jsx)(H.S,{extra:(0,t.jsxs)("div",{children:[(0,t.jsx)(s.FormattedMessage,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,t.jsx)("a",{style:{fontWeight:600},children:V.length})," ",(0,t.jsx)(s.FormattedMessage,{id:"pages.searchTable.item",defaultMessage:"\u9879"}),"\xA0\xA0",(0,t.jsxs)("span",{children:[(0,t.jsx)(s.FormattedMessage,{id:"pages.searchTable.totalServiceCalls",defaultMessage:"Total number of service calls"})," ",V.reduce(function(E,v){return E},0)," ",(0,t.jsx)(s.FormattedMessage,{id:"pages.searchTable.tenThousand",defaultMessage:"\u4E07"})]})]}),children:(0,t.jsx)(K.ZP,{onClick:P()(l()().mark(function E(){var v,f;return l()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,ve(V);case 2:ue([]),(v=W.current)===null||v===void 0||(f=v.reloadAndRest)===null||f===void 0||f.call(v);case 4:case"end":return z.stop()}},E)})),children:(0,t.jsx)(s.FormattedMessage,{id:"pages.searchTable.batchDeletion",defaultMessage:"Batch deletion"})})}),(0,t.jsx)(pe,{onSubmit:function(){var E=P()(l()().mark(function v(f){var U;return l()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return f.id=c==null?void 0:c.id,T.next=3,he(f);case 3:U=T.sent,U&&(R(!1),g(void 0),W.current&&W.current.reload());case 5:case"end":return T.stop()}},v)}));return function(v){return E.apply(this,arguments)}}(),onCancel:function(){R(!1),k||g(void 0)},createModalOpen:a,values:c||{}}),(0,t.jsx)(fe,{onSubmit:function(){var E=P()(l()().mark(function v(f){var U;return l()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return f.id=c==null?void 0:c.id,T.next=3,ge(f);case 3:U=T.sent,U&&(L(!1),g(void 0),W.current&&W.current.reload());case 5:case"end":return T.stop()}},v)}));return function(v){return E.apply(this,arguments)}}(),onCancel:function(){L(!1),k||g(void 0)},updateModalOpen:X,values:c||{}}),(0,t.jsx)(Q.Z,{width:600,open:k,onClose:function(){g(void 0),re(!1)},closable:!1,children:(c==null?void 0:c.name)&&(0,t.jsx)(N.vY,{column:2,title:c==null?void 0:c.name,request:P()(l()().mark(function E(){return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",{data:c||{}});case 1:case"end":return f.stop()}},E)})),params:{id:c==null?void 0:c.name},columns:le})})]})},Pe=Me}}]);
