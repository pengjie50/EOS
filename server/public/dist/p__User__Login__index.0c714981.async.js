"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{42110:function(V,B){var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};B.Z=e},78147:function(V,B,e){e.r(B),e.d(B,{default:function(){return he}});var E=e(17061),S=e.n(E),w=e(42122),y=e.n(w),G=e(17156),T=e.n(G),K=e(27424),k=e.n(K),X=e(2618),Y=e(87547),u=e(1413),j=e(67294),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},J=$,Q=e(91146),H=function(a,n){return j.createElement(Q.Z,(0,u.Z)((0,u.Z)({},a),{},{ref:n,icon:J}))};H.displayName="LockOutlined";var q=j.forwardRef(H),_=e(91),ee=e(10915),te=e(63830),ne=e(94184),ae=e.n(ne),re=e(34994),b=e(4942),se=e(14855),ie=function(a){var n;return n={},(0,b.Z)(n,a.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:a.colorTextSecondary,fontSize:a.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),(0,b.Z)(n,"@media (min-width: @screen-md-min)",(0,b.Z)({},"".concat(a.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"})),n};function oe(s){return(0,se.Xj)("LoginForm",function(a){var n=(0,u.Z)((0,u.Z)({},a),{},{componentCls:".".concat(s)});return[ie(n)]})}var t=e(85893),le=["logo","message","contentStyle","title","subTitle","actions","children"];function ce(s){var a,n=s.logo,f=s.message,z=s.contentStyle,C=s.title,L=s.subTitle,F=s.actions,W=s.children,o=(0,_.Z)(s,le),M=(0,ee.YB)(),I=o.submitter===!1?!1:(0,u.Z)((0,u.Z)({searchConfig:{submitText:M.getMessage("loginForm.submitText","\u767B\u5F55")}},o.submitter),{},{submitButtonProps:(0,u.Z)({size:"large",style:{width:"100%"}},(a=o.submitter)===null||a===void 0?void 0:a.submitButtonProps),render:function(l,r){var c,v=r.pop();if(typeof(o==null||(c=o.submitter)===null||c===void 0?void 0:c.render)=="function"){var x,P;return o==null||(x=o.submitter)===null||x===void 0||(P=x.render)===null||P===void 0?void 0:P.call(x,l,r)}return v}}),O=(0,j.useContext)(te.ZP.ConfigContext),m=O.getPrefixCls("pro-form-login"),N=oe(m),A=N.wrapSSR,Z=N.hashId,d=function(l){return"".concat(m,"-").concat(l," ").concat(Z)},h=(0,j.useMemo)(function(){return n?typeof n=="string"?(0,t.jsx)("img",{src:n}):n:null},[n]);return A((0,t.jsxs)("div",{className:ae()(d("container"),Z),children:[(0,t.jsxs)("div",{className:"".concat(d("top")," ").concat(Z),children:[C||h?(0,t.jsxs)("div",{className:"".concat(d("header")),children:[h?(0,t.jsx)("span",{className:d("logo"),children:h}):null,C?(0,t.jsx)("span",{className:d("title"),children:C}):null]}):null,L?(0,t.jsx)("div",{className:d("desc"),children:L}):null]}),(0,t.jsxs)("div",{className:d("main"),style:(0,u.Z)({width:328},z),children:[(0,t.jsxs)(re.A,(0,u.Z)((0,u.Z)({isKeyPressSubmit:!0},o),{},{submitter:I,children:[f,W]})),F?(0,t.jsx)("div",{className:d("main-other"),children:F}):null]})]}))}var R=e(5966),U=e(19097),p=e(9927),ue=e(99138),D=e(2453),de=e(67610),ge=e(73935),pe=function(){var a=useEmotionCss(function(n){var f=n.token;return{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:f.colorPrimaryActive}}});return _jsxs(_Fragment,{children:[_jsx(AlipayCircleOutlined,{className:a},"AlipayCircleOutlined"),_jsx(TaobaoCircleOutlined,{className:a},"TaobaoCircleOutlined"),_jsx(WeiboCircleOutlined,{className:a},"WeiboCircleOutlined")]})},ve=function(){var a=(0,U.l)(function(n){var f=n.token;return{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:f.borderRadius,":hover":{backgroundColor:f.colorBgTextHover}}});return(0,t.jsx)("div",{className:a,"data-lang":!0,children:p.SelectLang&&(0,t.jsx)(p.SelectLang,{})})},fe=function(a){var n=a.content;return(0,t.jsx)(ue.Z,{style:{marginBottom:24},message:n,type:"error",showIcon:!0})},me=function(){var a=(0,j.useState)({}),n=k()(a,2),f=n[0],z=n[1],C=(0,j.useState)("account"),L=k()(C,2),F=L[0],W=L[1],o=(0,p.useModel)("@@initialState"),M=o.initialState,I=o.setInitialState,O=(0,U.l)(function(){return{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden",backgroundImage:"url('/loginbg.jpg')",backgroundSize:"100% 100%"}}),m=(0,p.useIntl)(),N=function(){var h=T()(S()().mark(function g(){var l,r;return S()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,M==null||(l=M.fetchUserInfo)===null||l===void 0?void 0:l.call(M);case 2:r=v.sent,r&&(console.log(r),(0,ge.flushSync)(function(){I(function(x){return y()(y()({},x),{},{currentUser:r})})}));case 4:case"end":return v.stop()}},g)}));return function(){return h.apply(this,arguments)}}(),A=function(){var h=T()(S()().mark(function g(l){var r,c,v,x;return S()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,X.x4)(y()(y()({},l),{},{type:F}));case 3:if(r=i.sent,r.status!=="ok"){i.next=14;break}return c=m.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),D.ZP.success(c),I(function(xe){return y()(y()({},xe),{},{token:r.token})}),localStorage.setItem("token",(r==null?void 0:r.token)||""),i.next=11,N();case 11:return v=new URL(window.location.href).searchParams,p.history.push(v.get("redirect")||"/"),i.abrupt("return");case 14:console.log(r),z(r),i.next=23;break;case 18:i.prev=18,i.t0=i.catch(0),x=m.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(i.t0),D.ZP.error(x);case 23:case"end":return i.stop()}},g,null,[[0,18]])}));return function(l){return h.apply(this,arguments)}}(),Z=f.status,d=f.type;return(0,t.jsxs)("div",{className:O,children:[(0,t.jsx)("div",{style:{height:42,fontSize:"24px",fontWeight:"bold",lineHeight:"42px",color:"#F67373",paddingLeft:"40px",backgroundColor:"#F2F2F2",top:0,left:0,right:0,position:"fixed"},children:"Demurrage Management System (DMS)"}),(0,t.jsx)(p.Helmet,{children:(0,t.jsxs)("title",{children:[m.formatMessage({id:"menu.login",defaultMessage:"\u767B\u5F55\u9875"}),"- ",de.Z.title]})}),(0,t.jsx)(ve,{}),(0,t.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,t.jsxs)(ce,{contentStyle:{minWidth:280,maxWidth:"75vw",marginRight:20,border:"1px solid #F5F7F9",padding:20,backgroundColor:"#7BA8D9"},initialValues:{autoLogin:!0},onFinish:function(){var h=T()(S()().mark(function g(l){return S()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,A(l);case 2:case"end":return c.stop()}},g)}));return function(g){return h.apply(this,arguments)}}(),children:[Z==="error"&&d==="account"&&(0,t.jsx)(fe,{content:m.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF"})}),F==="account"&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.Z,{name:"username",fieldProps:{size:"large",prefix:(0,t.jsx)(Y.Z,{})},placeholder:m.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u7528\u6237\u540D"}),rules:[{required:!0,message:(0,t.jsx)(p.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,t.jsx)(R.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,t.jsx)(q,{})},placeholder:m.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,t.jsx)(p.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),(0,t.jsx)("div",{style:{marginBottom:24,color:"#fff"},children:"By continuing, you agree to Demurrage Management System\u2019s Terms of Service, Privacy Policy and Cookie Use."})]})})]})},he=me}}]);
